# ---------- staccato20 repository deploy ----------

name: Synchronize to forked repo
on:
  push:
    branches:
      - main

jobs:
  sync:
    name: Sync forked repo
    runs-on: ubuntu-latest

    steps:
      - name: Checkout main
        uses: actions/checkout@v2
        with:
          token: ${{ secrets.AUTO_STACCATO20 }}
          fetch-depth: 0
          ref: main

      - name: Add remote-url
        run: |
          git remote add forked-repo https://github.com/staccato20:${{ secrets.AUTO_STACCATO20 }}@github.com/staccato20/FitnessMate-FE-Deploy
          git config user.name staccato20
          git config user.email ${{ secrets.OFFICIAL_ACCOUNT_EMAIL }}

      - name: Push changes to forked-repo
        run: |
          git push -f forked-repo main

      - name: Clean up
        run: |
          git remote remove forked-repo

# ---------- Whoknow77 repository deploy ----------

# name: Push to Test Repo

# on:
#   push:
#     branches:
#       - test

# jobs:
#   push-to-personal-repo:
#     runs-on: ubuntu-latest

#     steps:
#       - name: Checkout Frontend repo
#         uses: actions/checkout@v2

#       - name: Clone test Repo
#         run: |
#           git clone https://github.com/Whoknow77/fitnessmate-frontend.git ../test

#       - name: Copy changes to test Repo
#         run: |
#           cp -r ./* ../test/

#       - name: Push changes to test repo main branch
#         run: |
#           cd ../test
#           git config user.name "${{ github.actor }}"
#           git config user.email "${{ github.actor }}@users.noreply.github.com"
#           git add .
#           git commit -m "Update from Frontend repo by ${{ github.actor }}"
#           git push https://x-access-token:${{ secrets.fitmate }}@github.com/Whoknow77/fitnessmate-frontend.git main
